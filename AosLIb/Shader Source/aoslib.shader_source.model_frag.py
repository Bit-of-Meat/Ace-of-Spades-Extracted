# uncompyle6 version 3.9.0
# Python bytecode version base 2.7 (62211)
# Decompiled from: Python 3.9.0 (tags/v3.9.0:9cf6752, Oct  5 2020, 15:34:40) [MSC v.1927 64 bit (AMD64)]
# Embedded file name: C:\TeamCity\buildAgent\work\dc8eb0b1d2cf198a\Main\client\standalone\build\pyi.win32\run_obfuscated\out00-PYZ.pyz\aoslib.shader_source.model_frag
model_frag = '\n#version 110\n\n#define DETAIL_LEVEL 3\n\n#define saturate(x) clamp(x, 0.0, 1.0)\n\n#if DETAIL_LEVEL > 0\n\nvarying vec3 normal;\nvarying vec3 worldPos;\n\n#endif // DETAIL_LEVEL\n\nvoid main() \n{\n    vec4 color = gl_Color;\n\n#if DETAIL_LEVEL > 0\n    // find our diffuse contribution\n    vec3 L = normalize(gl_LightSource[0].position.xyz);\n    vec3 N = normalize(normal);\n\n    // bring the -1 -> 1 range into 0 - 1\n    float fresnel = (0.5 + 0.5*dot(N, L)) * 0.5 + 0.5;\n    vec3 dir1Color = (fresnel * gl_LightSource[0].diffuse.rgb);\n\n    // now find our specular contribution\n    vec3 H = normalize(gl_LightSource[0].halfVector.xyz);\n    float specular = max(0.0, dot(N, H));\n    vec3 specularResult = (pow(specular,5.0) * gl_LightSource[0].specular.rgb * 0.2);\n    dir1Color.rgb += specularResult;\n\n    // 2nd directional light\n    vec3 Lback = normalize(gl_LightSource[1].position.xyz);\n//    vec3 Nback = normalize(normal);\n\n    // bring the -1 -> 1 range into 0 - 1\n    float fresnel1 = (0.5 + 0.5*dot(N, Lback)) * 0.5 + 0.5;\n    vec3 dir2Color = (fresnel1 * gl_LightSource[1].diffuse.rgb);\n\n    // now find our specular contribution\n    vec3 Hback = normalize(gl_LightSource[1].halfVector.xyz);\n    float specularback = max(0.0, dot(N, Hback));\n    vec3 specularResult2 = (pow(specularback,5.0) * gl_LightSource[1].specular.rgb * 0.2);\n    dir2Color.rgb += specularResult2;\n\n    vec3 lightAmbient = gl_LightSource[0].ambient.rgb * gl_LightSource[0].ambient.a;\n    color.rgb = color.rgb * saturate(dir1Color + dir2Color + lightAmbient);\n\n#endif // DETAIL_LEVEL\n\n    // do the final colouring with the fog\n    color.rgb = mix(gl_Fog.color.rgb, color.rgb, saturate((gl_Fog.end - gl_FogFragCoord) * gl_Fog.scale));\n\n    gl_FragColor = vec4(color.rgb, color.a);\n}\n'
# okay decompiling out\aoslib.shader_source.model_frag.pyc
